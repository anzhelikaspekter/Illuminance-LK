<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Edit Withdrawal">
    <title>Edit Withdrawal</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.min.css">
</head>

<body>
    <section class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
        <div class="modal__wrap">
            <button type="button" class="modal__close" aria-label="Close modal">
                <img src="img/icon/close.svg" width="18" height="18" alt="Close icon">
            </button>

            <header class="modal__header">
                <div class="modal__icon-wrap classic" aria-label="Edit Withdrawal">
                    <img src="img/icon/edit.svg" width="18" height="18" alt="Edit-icon">
                </div>
            </header>

            <div class="modal__content">
                <div class="modal__title-wrap">
                    <h1 id="modal-title" class="modal__title">Edit Withdrawal</h1>
                </div>

                <form action="" method="post" class="modal__form">
                    <div class="modal__form-wrap">
                        <label class="modal__form-wrap--label">Network</label>
                        <div class="modal__form-wrap--select" role="listbox" aria-label="Select Network">
                            <button type="button" class="modal__form-wrap--select-field" aria-haspopup="listbox"
                                aria-expanded="false">
                                <img src="img/icon/usdt.svg" width="20" height="20" alt="USDT icon"
                                    class="modal__form-wrap--select-icon">
                                <p class="modal__form-wrap--select-text">USDT <span class="secondary">TRC 20</span></p>
                                <img src="img/icon/arrow-down.svg" width="14" height="14" alt=""
                                    class="modal__form-wrap--select-arrow">
                            </button>

                            <ul class="modal__form-wrap--select-dropdown" hidden>
                                <li class="modal__form-wrap--select-option active" data-value="USDT TRC 20">
                                    <img src="img/icon/usdt.svg" width="20" height="20" alt="USDT icon">
                                    <p class="modal__form-wrap--select-text">USDT <span class="secondary">TRC 20</span>
                                    </p>
                                </li>
                                <li class="modal__form-wrap--select-option" data-value="BTC Bitcoin">
                                    <img src="img/icon/btc.svg" width="20" height="20" alt="BTC icon">
                                    <p class="modal__form-wrap--select-text">BTC <span class="secondary">Bitcoin</span>
                                    </p>
                                </li>
                                <li class="modal__form-wrap--select-option" data-value="ETH ERC 20">
                                    <img src="img/icon/eth.svg" width="20" height="20" alt="ETH icon">
                                    <p class="modal__form-wrap--select-text">ETH <span class="secondary">ERC 20</span>
                                    </p>
                                </li>
                                <li class="modal__form-wrap--select-option" data-value="USDT TRC 20">
                                    <img src="img/icon/usdt.svg" width="20" height="20" alt="USDT icon">
                                    <p class="modal__form-wrap--select-text">USDT <span class="secondary">TRC 20</span>
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal__form-wrap">
                        <label for="address" class="modal__form-wrap--label">Address</label>
                        <input type="text" id="address" name="address" value="TUkNL2TRBfJ4zsDdjTrXMW9rn8K2359zFH"
                            class="modal__form-wrap--input">
                        <button type="button" class="modal__form-wrap--link">Paste</button>
                    </div>

                    <button type="button" class="modal__btn" aria-label="Confirm">Confirm</button>
                </form>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const modal = document.querySelector(".modal");
            const wrap = modal.querySelector(".modal__wrap");
            const closeBtn = modal.querySelector(".modal__close");

            function closeModal() {
                if (window.parent && window.parent !== window) {
                    window.parent.postMessage({ action: "closeModal" }, "*");
                } else {
                    window.history.back();
                }
            }

            closeBtn.addEventListener("click", closeModal);

            modal.addEventListener("click", (e) => {
                if (!wrap.contains(e.target)) {
                    closeModal();
                }
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const select = document.querySelector(".modal__form-wrap--select");
            if (!select) return;

            const field = select.querySelector(".modal__form-wrap--select-field");
            const dropdown = select.querySelector(".modal__form-wrap--select-dropdown");
            const options = select.querySelectorAll(".modal__form-wrap--select-option");
            const textField = select.querySelector(".modal__form-wrap--select-text");
            const iconField = select.querySelector(".modal__form-wrap--select-icon");
            const arrow = select.querySelector(".modal__form-wrap--select-arrow");

            field.addEventListener("click", () => {
                const expanded = field.getAttribute("aria-expanded") === "true";
                const newState = !expanded;
                field.setAttribute("aria-expanded", String(newState));
                dropdown.hidden = expanded;

                arrow.style.transform = newState ? "rotate(180deg)" : "rotate(0deg)";
                arrow.style.transition = "transform 0.25s ease";
            });

            options.forEach((option) => {
                option.addEventListener("click", () => {
                    options.forEach((o) => o.classList.remove("active"));
                    option.classList.add("active");

                    const newIconSrc = option.querySelector("img").getAttribute("src");
                    const newMainText = option.querySelector(".modal__form-wrap--select-text").childNodes[0].textContent.trim();
                    const newSubText = option.querySelector(".secondary").textContent.trim();

                    iconField.setAttribute("src", newIconSrc);
                    textField.innerHTML = `${newMainText} <span class="secondary">${newSubText}</span>`;

                    dropdown.hidden = true;
                    field.setAttribute("aria-expanded", "false");

                    arrow.style.transform = "rotate(0deg)";
                });
            });

            document.addEventListener("click", (e) => {
                if (!select.contains(e.target)) {
                    dropdown.hidden = true;
                    field.setAttribute("aria-expanded", "false");
                    arrow.style.transform = "rotate(0deg)";
                }
            });

            document.addEventListener("keydown", (e) => {
                if (e.key === "Escape") {
                    dropdown.hidden = true;
                    field.setAttribute("aria-expanded", "false");
                    arrow.style.transform = "rotate(0deg)";
                }
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const pasteBtn = document.querySelector(".modal__form-wrap--link");
            const addressInput = document.querySelector(".modal__form-wrap--input");

            if (!pasteBtn || !addressInput) return;

            pasteBtn.addEventListener("click", async () => {
                try {
                    const clipboardText = await navigator.clipboard.readText();

                    if (!clipboardText) {
                        console.warn("Clipboard is empty or access denied.");
                        return;
                    }

                    addressInput.value = clipboardText.trim();

                    addressInput.setAttribute("title", clipboardText.trim());
                } catch (err) {

                }
            });
        });
    </script>
</body>

</html>